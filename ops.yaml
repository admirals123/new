#!/bin/bash

# Use yq to get all the .metadata.name values as a JSON array
names_json=$(yq '.[].metadata.name' file1.yaml)

# Check if yq returned an empty array
if [[ -z "$names_json" ]]; then
  echo "No .metadata.name found in file1.yaml"
  exit 1
fi

# Convert the JSON array to a bash array
names_array=( $(echo "$names_json" | jq -r '.[]') )

# Print the array elements
echo "Names:"
for name in "${names_array[@]}"; do
  echo "- $name"
done
